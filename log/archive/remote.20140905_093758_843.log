Fri 2014.09.05 09:37:57.267 +0100	LogWriter	START
Logging started

Fri 2014.09.05 09:37:57.269 +0100	SERVER_TEST	START
Start logging

Fri 2014.09.05 09:37:57.269 +0100	SERVER_TEST	INFO
Test config
  logFile	./log/remote.log
        servers.remote.broker.name	remoteTest
        servers.remote.broker.wildcard	remotePassthrough
            servers.remote.broker.brokerList.remoteBroker.host	127.0.0.1
            servers.remote.broker.brokerList.remoteBroker.port	31066
            servers.remote.broker.serviceList.remotePassthrough.wildcard	pass
                servers.remote.broker.serviceList.remotePassthrough.processList.pass.loader	lexa.core.server.factory.InternalLoader
                servers.remote.broker.serviceList.remotePassthrough.processList.pass.class	PassThrough
                servers.remote.broker.serviceList.remotePassthrough.processList.pass.connectionName	remoteBroker
                servers.remote.broker.serviceList.remotePassthrough.processList.pass.maxProcesses	1
                  servers.remote.broker.serviceList.remotePassthrough.processList.pass.config.allowAnonymous	false
                    servers.remote.broker.serviceList.remotePassthrough.processList.pass.config.serviceList.echo	echoService
        servers.remote.message.service	testService
        servers.remote.message.message	echo
          servers.remote.message.request.testMessage	### remote test ###

Fri 2014.09.05 09:37:57.277 +0100	SERVER_TEST	INFO
Run all tests

Fri 2014.09.05 09:37:57.278 +0100	SERVER_TEST	INFO
Test:remote

Fri 2014.09.05 09:37:57.278 +0100	SERVER_TEST	INFO
Config
    broker.name	remoteTest
    broker.wildcard	remotePassthrough
        broker.brokerList.remoteBroker.host	127.0.0.1
        broker.brokerList.remoteBroker.port	31066
        broker.serviceList.remotePassthrough.wildcard	pass
            broker.serviceList.remotePassthrough.processList.pass.loader	lexa.core.server.factory.InternalLoader
            broker.serviceList.remotePassthrough.processList.pass.class	PassThrough
            broker.serviceList.remotePassthrough.processList.pass.connectionName	remoteBroker
            broker.serviceList.remotePassthrough.processList.pass.maxProcesses	1
              broker.serviceList.remotePassthrough.processList.pass.config.allowAnonymous	false
                broker.serviceList.remotePassthrough.processList.pass.config.serviceList.echo	echoService
    message.service	testService
    message.message	echo
      message.request.testMessage	### remote test ###

Fri 2014.09.05 09:37:57.335 +0100	Broker.remoteTest	START
Start logging

Fri 2014.09.05 09:37:57.368 +0100	BrokerHandler.remoteTest	START
Start logging

Fri 2014.09.05 09:37:57.373 +0100	Service.remotePassthrough	START
Start logging

Fri 2014.09.05 09:37:57.384 +0100	ProcessAgent.pass	START
Start logging

Fri 2014.09.05 09:37:57.392 +0100	ProcessFactory.PassThrough	START
Start logging

Fri 2014.09.05 09:37:57.404 +0100	MessagingContainerAsync.pass	START
Start logging

Fri 2014.09.05 09:37:57.405 +0100	Service.remotePassthrough	INFO
Service initialised, wildcard ='pass'

Fri 2014.09.05 09:37:57.406 +0100	MessagingContainerAsync.remotePassthrough	START
Start logging

Fri 2014.09.05 09:37:57.407 +0100	MessagingContainerAsync.remoteTest	START
Start logging

Fri 2014.09.05 09:37:57.424 +0100	Broker.remoteTest	INFO
Initialised message broker remoteTest

Fri 2014.09.05 09:37:57.424 +0100	Broker.remoteTest	INFO
starting

Fri 2014.09.05 09:37:57.427 +0100	Connection.remoteBroker#1	START
Start logging

Fri 2014.09.05 09:37:57.454 +0100	Broker.remoteTest	INFO
new connection 1 to remoteBroker

Fri 2014.09.05 09:37:57.455 +0100	BrokerHandler.remoteTest	DEBUG
setRunning true

Fri 2014.09.05 09:37:57.456 +0100	MessagingContainerAsync.remotePassthrough	INFO
thread started

Fri 2014.09.05 09:37:57.457 +0100	Broker.remoteTest	INFO
started

Fri 2014.09.05 09:37:57.457 +0100	MessagingContainerAsync.pass	INFO
thread started

Fri 2014.09.05 09:37:57.458 +0100	Connection.local#2	START
Start logging

Fri 2014.09.05 09:37:57.459 +0100	MessagingContainerAsync.remoteTest	INFO
thread started

Fri 2014.09.05 09:37:57.460 +0100	Broker.remoteTest	INFO
new connection 2 to local

Fri 2014.09.05 09:37:57.466 +0100	BrokerHandler.remoteTest	MESSAGE_IO
inbound
  service	testService
  message	echo
  connectionId	2
  sourceId	1
    request.testMessage	### remote test ###

Fri 2014.09.05 09:37:57.468 +0100	Service.remotePassthrough	MESSAGE_IO
inbound
  service	testService
  message	echo
  connectionId	2
  sourceId	1
    request.testMessage	### remote test ###

Fri 2014.09.05 09:37:57.471 +0100	ProcessAgent.pass	DEBUG
inbound
  service	testService
  message	echo
  connectionId	2
  sourceId	1
    request.testMessage	### remote test ###

Fri 2014.09.05 09:37:57.473 +0100	ProcessAgent.pass	DEBUG
processAction.start

Fri 2014.09.05 09:37:57.474 +0100	ProcessAgent.pass	DEBUG
Submit request
  service	testService
  message	echo
  connectionId	2
  sourceId	1
    request.testMessage	### remote test ###

Fri 2014.09.05 09:37:57.477 +0100	ProcessAgent.pass	DEBUG
Handle requests
  sourceRef	1
      messageList.1.service	echoService
      messageList.1.message	echo
        messageList.1.source.sourceRef	1
          messageList.1.source.source.service	testService
          messageList.1.source.source.message	echo
          messageList.1.source.source.sourceId	1
        messageList.1.request.testMessage	### remote test ###

Fri 2014.09.05 09:37:57.490 +0100	Connection.remoteBroker#1	ERROR
inbound send failed
  service	echoService
  message	echo
  connectionId	1
  sourceId	1
  sourceRef	1
    source.sourceRef	1
      source.source.service	testService
      source.source.message	echo
      source.source.sourceId	1
    request.testMessage	### remote test ###
Exception:
java.net.SocketException: Software caused connection abort: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
	at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
	at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)
	at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
	at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
	at java.io.BufferedWriter.flush(BufferedWriter.java:254)
	at lexa.core.data.io.DataWriter.write(DataWriter.java:188)
	at lexa.core.data.io.DataWriter.write(DataWriter.java:231)
	at lexa.core.data.io.DataWriter.write(DataWriter.java:186)
	at lexa.core.data.io.DataWriter.write(DataWriter.java:161)
	at lexa.core.comms.Sender.send(Sender.java:54)
	at lexa.core.comms.Session.send(Session.java:100)
	at lexa.core.server.connection.RemoteConnection.inbound(RemoteConnection.java:56)
	at lexa.core.server.connection.Connection.submit(Connection.java:111)
	at lexa.core.server.ProcessAgent.processForwardRequests(ProcessAgent.java:304)
	at lexa.core.server.ProcessAgent.processAction(ProcessAgent.java:233)
	at lexa.core.server.ProcessAgent.process(ProcessAgent.java:203)
	at lexa.core.server.ProcessAgent.inbound(ProcessAgent.java:167)
	at lexa.core.server.messaging.MessagingContainerAsync.process(MessagingContainerAsync.java:108)
	at lexa.core.server.messaging.MessagingContainerAsync.run(MessagingContainerAsync.java:60)

Fri 2014.09.05 09:37:57.499 +0100	ProcessAgent.pass	DEBUG
processAction.end

Fri 2014.09.05 09:37:58.466 +0100	SERVER_TEST	DEBUG
sleeping

